<!--Lama's Page-->
  <!-- ***** Main Content ***** -->
 
  <div class="wrapper">

    <div id="search-container">

      <input type="search" id="search-input" placeholder="ابحث على مكان" />
      <button id="search">ابحث</button>

      <div class="border-button"> 
        <a href="/saveditems/save" class="save">
          اطلع على الأماكن المحفوظة  <i class="fa fa-bookmark"></i> 
      </a>
      </div>
      
    </div>
    
      <!-- Filter Buttons Container -->
      <div class="filter-container">
        <div id="buttons">
          <button class="button-value" data-category="All" onclick="toggleFilter(this, 'All')">الكل</button>
          <% categories.forEach(category => { %>
            <button class="button-value" data-category="<%= category.key %>" onclick="toggleFilter(this, '<%= category.key %>')">
              <%= category.name %>
            </button>
          <% }); %>
        </div>
      </div>
    
      <!-- Section to Show Selected Filters -->
      <div id="selected-filters"></div>
    
      <!-- Shop Cards -->
      <div id="shops">
        <% shops.forEach(shop => { %>
          <div class="card" data-category="<%= shop.category %>" onclick="navigateToShop('<%= shop.placeName %>', '<%= shop.category %>', '<%= shop.image %>', '<%= shop.location %>')">
            <div class="image-container">
              <img src="<%= shop.image %>" alt="<%= shop.placeName %>">
            </div>
            <div class="container">
              <h5 class="place-name"><%= shop.placeName %></h5>
              <h6><%= shop.location %></h6>
            </div>
          </div>
        <% }); %>
      </div>
    
      <script>
        function navigateToShop(name, category, image, location) {
          window.location.href = `/shop-details?name=${encodeURIComponent(name)}&category=${encodeURIComponent(category)}&image=${encodeURIComponent(image)}&location=${encodeURIComponent(location)}`;
        }
      </script>
    </div>
    
  
  <!-- Scripts -->
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const filter = urlParams.get("filter");

    function navigateToShop(name, category, image, location) {
      window.location.href = `/views/shop-details?name=${encodeURIComponent(name)}&category=${encodeURIComponent(category)}&image=${encodeURIComponent(image)}&location=${encodeURIComponent(location)}`;
    }

    function setActiveFilter(filterValue) {
      document.querySelectorAll(".button-value").forEach(button => {
        if (button.getAttribute("data-category") === filterValue) {
          button.classList.add("active");
        } else {
          button.classList.remove("active");
        }
      });
    }

    window.onload = () => {
      if (filter) {
        setActiveFilter(filter);
      }
    };

    function goBack() {
      window.location.href = "/";
    }
  </script>


